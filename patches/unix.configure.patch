diff --git a/unix/configure b/unix/configure
old mode 100644
new mode 100755
index 73ba803..5595832
--- a/unix/configure
+++ b/unix/configure
@@ -16,10 +16,6 @@
 
 trap "rm -f conftest* core a.out; exit 1" 1 2 3 15
 
-CC=${1-cc}
-CFLAGS=${2-"-I. -DUNIX"}
-LFLAGS1=''
-LFLAGS2=''
 LN="ln -s"
 
 CFLAGS_OPT=''
@@ -28,6 +24,36 @@ CFLAGS_OPT=''
 IZ_BZIP2=${3-}
 CFLAGS_BZ=''
 
+MAKEFLAGS=$4
+
+# Clean up escaped spaces
+MAKEFLAGS=$(echo "$MAKEFLAGS" | sed 's/\\\ / /g')
+
+echo "$MAKEFLAGS" | tr ' ' '\n' | while read -r line; do
+    case "$line" in
+        CC=*) CC="${line#CC=}" ;;
+        CXX=*) CXX="${line#CXX=}" ;;
+        CPPFLAGS=*)
+            CPPFLAGS="${line#CPPFLAGS=}"
+            ;;
+        CFLAGS=*)
+            CFLAGS="${line#CFLAGS=}"
+            ;;
+        LDFLAGS=*)
+            LDFLAGS="${line#LDFLAGS=}"
+            ;;
+        LDLIBS=*)
+            LDLIBS="${line#LDLIBS=}"
+            ;;
+        CXXFLAGS=*)
+            CXXFLAGS="${line#CXXFLAGS=}"
+            ;;
+    esac
+done
+
+CFLAGS="${CPPFLAGS} ${2-"-I. -DUNIX"} $CFLAGS"
+LFLAGS1="${LDFLAGS}"
+LFLAGS2="${LDLIBS}"
 
 echo 'Check C compiler type (optimization options)'
 # Sun C?
